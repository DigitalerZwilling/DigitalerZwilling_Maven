<!DOCTYPE html>
<html lang="en">
                <script src="initEinzelansicht.js"></script>
		<script src="utilities.js"></script>
		<script src="tabellenansicht.js"></script>
		<script>
                var elementTypeList = ["elementType_6","elementType_7"];
                var elementIdList = ["elementId_6","elementId_7"];
                var backButtons = ["#backBtn1", "#backBtn2", "#backBtn3", "#backBtn4", "#backBtn5","#backBtn6", "#backBtn7"];

                $(document).ready(myfunction);
                //$(document).on('resize',myfunction);

                function myfunction() {
                    //SVG laden
                    $("#uebersicht").load("svg.html");

                    //LocalStorage-Item 'mainContainer' auf den Wert 'uebersicht' setzen
                    localStorage.setItem("mainContainer", "uebersicht");

                    //Caret-Symbol für Dropdown-Buttons
                    $caret = ' <span class="caret"></span>';

                    //LocalStorage abfragen: Störungen aus Detailansicht heraus aufgerufen?
                    //Dann in Übersicht wechseln.
                    if(localStorage.getItem("stoerung")=="stoerungLaden"){
                        initStoerung(7);
                    }

                    //LocalStorage abfragen und ÜbersichtsDiv und beständiges Div6 laden
                    //elementType liegt vor, wenn tabellenansicht
                    //elementType und elementId, wenn einzelansicht
                    if(localStorage.getItem(elementTypeList[0])!=null){
                        if(localStorage.getItem(elementIdList[0])!=null){
                            reloadEinzelansicht(localStorage.getItem(elementTypeList[0]),localStorage.getItem(elementIdList[0]),6);
                        }else{
                            reloadTabelle(localStorage.getItem(elementTypeList[0]),6);
                        }
                    }

                    //localStorage für Div7 abfragen
                    if(localStorage.getItem("elementType_7")!=null && localStorage.getItem("elementId_7")!=null){
                        localStorage.removeItem("stoerung");
                        initEinzelansicht(7);
                    }

                    $(".btn.btn-default.dropdown-toggle").on('click', function(){
                        idBtn = $(this).attr('id');
                        loadViaDropdown(idBtn);
                    });
                    
                    //history für ZurueckButton abfragen.
                    //wenn history vorhanden, Zurück-Button anzeigen.
                    for(i=0;i<7;i++){
                        if(zurueckList_all[i].length<=1){
                            $(backButtons[i]).hide();
                        }
                    }
                    
                    
                    //Zurück-Buttons, onClick
                    $(".btn.btn-default.backBtn").on('click', function(){            		
                        idBtn = $(this).attr('id');
                        alert("click");
                        var nummer;
                        switch(idBtn){
                            case "backBtn6":
                                    nummer = 5;
                                    alert("click2");
                                    break;	
                            case "backBtn7":
                                    nummer = 6;	
                        }                                
                        loadHistory(nummer);
                    });
                }
                
                function loadHistory(nummer){
                    var nrAusgabe = nummer+1;
                    var lastElement = zurueckList_all[nummer].length-1;
                    var laenge = zurueckList_all[nummer].length;

                    localStorage.setItem("elementType_"+nrAusgabe, zurueckList_all[(nummer)][lastElement-1][0]);
                    localStorage.setItem("elementId_"+nrAusgabe, zurueckList_all[(nummer)][lastElement-1][1]);
                    zurueckList_all[nummer].pop();
                    //zurueckList_all[nummer].length = laenge-1;
                     if(zurueckList_all[nummer].length==1){

                        $(backButtons[nummer]).hide();    
                    }

                    $(".dd-btn"+nrAusgabe).html(localStorage.getItem("elementType_"+ nrAusgabe) + ' <span class = "caret"></span');

                    if(zurueckList_all[nummer][lastElement-1][1]==null){
                     loadDiv(nummer+1);                               
                    }else
                     initEinzelansicht(nummer+1);  
                }
                
                function loadViaDropdown(idBtn){
                    $caret = ' <span class="caret"></span>';
                    var nummer;
                    switch(idBtn){
                        
                        case "dd-btn6":
                            nummer = 6;
                    }
                    $(".dropdown"+nummer+" li a").click(function(){
                            $val = $(this).html();

                            localStorage.removeItem('elementId_'+nummer);
                            localStorage.setItem('elementType_'+nummer,$val);
                                    $(".dd-btn"+nummer).html($val+$caret);
                                    //zurueckList_all[nummer-1][0]=null;
                                    addZurueckList(nummer, null, localStorage.getItem('elementType_'+nummer));
                                    console.log("-------------zur ZurückList geaddet.")
                                    loadDiv(nummer);
                    }); 
                }
				
                function reloadTabelle(elementType, divNumber){
                    var i = divNumber;
                    $val = elementType;
                    $(".dd-btn"+i).html($val+$caret);
                    loadDiv(i);
                }

                function reloadEinzelansicht(elementType, elementId, divNumber){
                    var i = divNumber;
                    $val = elementType;
                    $(".dd-btn"+i).html($val+$caret);
                    loadDiv(i);
                }

                function loadDiv6(val){
                    localStorage.removeItem('elementId_6');
                    localStorage.setItem('elementType_6',val);
                    $(".btn.dropdown-toggle").html(val+$caret);
                    loadDiv(6);
                }


                </script>
			
			

                <div class="row" style="background-color:lightgrey; height:100%;" id="observedDiv">
                    <!--COL1 für Desktop-Version-->
                    <div class="col-lg-8 col-md-7 col-sm-12 col-xs-12 panelUebersicht" > 
                        <div class="panel panel-default" style="height:100%; overflow-y: auto;">
                            <div class="panel-body" id="uebersicht" style="height:100%;">

                            </div>
                        </div>
                    </div>



                    <!--COL2 für Desktop-Version-->
                    <div class="col-lg-4 col-md-5 col-sm-12 col-xs-12" style="height:100%;">
                        <div class="row" style="background-color:lightgrey; height:100%;">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 panelUebersichtsInfos"> 
                                <div class="panel panel-default" style="height:100%; overflow-y: auto;">
                                    <div class="panel-body">
                                        <div id="einzelansicht7">Keine Komponente gewählt.</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 panelEinzelansicht">
                                <div class="panel panel-default" style="height:100%; overflow-y: auto;">
                                    <div class="panel-body">
                                        <div class="btn-group">
                                            <button type="button" class="btn btn-default dropdown-toggle dd-btn6" id="dd-btn6" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Wähle Komponente <span class="caret"></span></button>
                                                <ul class="dropdown-menu dropdown6 scrollable-menu">
                                                    <li><a href="#">Artikel</a></li>
                                                    <li><a href="#">Hubpositionierstationen</a></li>
                                                    <li><a href="#">Hub-Quer-Stationen</a></li>
                                                    <li><a href="#">Roboter</a></li>
                                                    <li><a href="#">Sektoren</a></li>
                                                    <li><a href="#">Sensoren</a></li>
                                                    <li><a href="#">Transportbänder</a></li>
                                                    <li><a href="#">Warenträger</a></li>
                                                </ul>  
                                        </div>	
                                        <button id="backBtn6" type="button" class="btn btn-default backBtn">zurück</button>
                                        <div></br></div>
                                        <div id="einzelansicht6">Keine Komponente gewählt.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--END COL2 für Desktop-Version-->
                </div>

</html>